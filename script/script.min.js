"use strict";let ticTacToeForm=document.forms[0];var turno=!0;const innerUserHTML=document.querySelector(".userInnerTurn");let users={user1:"",user2:"",winner:""};const classInner={userO:"ms-Icon--LocationCircle",userX:"ms-Icon--Cancel"},htmlElm={resetGame:document.querySelector(".resetGame"),turno:document.querySelector(".turno"),mostrarGanador:document.getElementById("mostrarGanador")},gridItems=Array.from(document.querySelectorAll("#grid div")),gridItemsSpan=Array.from(document.querySelectorAll("#grid div span"));var contadorDeTurnos=0;function defineUsers(e){if(e.preventDefault(),ticTacToeForm.user1.value==ticTacToeForm.user2.value)return!1;users.user1=ticTacToeForm.user1.value,users.user2=ticTacToeForm.user2.value,document.querySelector(".nombres").classList.add("d-None"),document.getElementById("juego").classList.remove("d-None"),innerTurnUser()}function addClickEventGrid(){gridItems.forEach((e=>{e.addEventListener("click",listenerDivs,!1)}))}function listenerDivs(e){"false"==e.target.dataset.occupied&&(innerWithIcon(e.target),contadorDeTurnos++,evaluarGanador(),switchTurn(),innerTurnUser())}function innerWithIcon(e){let r="";r=turno?classInner.userX:classInner.userO,e.querySelector(".ms-Icon").classList.add(r),e.dataset.occupied="true"}function switchTurn(){turno=!turno}function innerTurnUser(){let e=innerUserHTML.parentNode;turno&&(innerUserHTML.innerHTML=users.user1,e.classList.add("animatedWho"),e.addEventListener("animationend",animatedWhoRemove)),turno||(innerUserHTML.innerHTML=users.user2,e.classList.add("animatedWho"),e.addEventListener("animationend",animatedWhoRemove))}function animatedWhoRemove(){let e=innerUserHTML.parentNode;e.classList.remove("animatedWho"),e.removeEventListener("animationend",animatedWhoRemove)}function evaluarGanador(){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];let r=turno?classInner.userX:classInner.userO,n=!1;for(const s of e){const[e,t,o]=s;if(gridItemsSpan[e].classList[1]===r&&gridItemsSpan[t].classList[1]===r&&gridItemsSpan[o].classList[1]===r){[e,t,o].forEach((e=>gridItemsSpan[e].parentNode.classList.add("winnerBGColor"))),n=!0;break}}n?(users.winner=turno?users.user1:users.user2,displayWinner(),htmlElm.resetGame.classList.remove("d-None")):contadorDeTurnos>=9&&(htmlElm.turno.classList.add("d-None"),htmlElm.resetGame.classList.remove("d-None"),removeListeners())}function displayWinner(){removeListeners(),htmlElm.turno.classList.add("d-None"),htmlElm.mostrarGanador.classList.remove("d-None"),document.querySelector("#mostrarGanador .ganadorInner").innerHTML=users.winner}function removeListeners(){gridItems.forEach((e=>{e.removeEventListener("click",listenerDivs,!1)}))}ticTacToeForm.addEventListener("submit",defineUsers,!1),addClickEventGrid();let buttonReset=document.querySelector(".resetGame button");function resetGame(){gridItemsSpan.forEach((e=>{e.parentNode.dataset.occupied="false";try{e.parentNode.classList.remove("winnerBGColor")}catch(e){}e.classList.remove(classInner.userO),e.classList.remove(classInner.userX)})),htmlElm.mostrarGanador.classList.add("d-None"),htmlElm.resetGame.classList.add("d-None"),htmlElm.turno.classList.remove("d-None"),addClickEventGrid(),contadorDeTurnos=0,""==users.winner&&firstRandomShift(),users.winner=""}function firstRandomShift(){turno=Math.random()<.5}buttonReset.addEventListener("click",resetGame,!1),firstRandomShift();